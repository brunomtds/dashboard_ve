{% extends 'base.html' %}
{% load static %}

{% block title %}Adicionar Funcion√°rio{% endblock %}

{% block header_title %}Adicionar Funcion√°rio{% endblock %}

{% block header_links %}
    <a href="{% url 'quadro_equipe:quadro_funcionarios' %}" class="text-sm hover:underline">Voltar ao Quadro</a>
    <a href="{% url 'dashboard:dashboard' %}" class="text-sm hover:underline">Dashboard</a>
{% endblock %}

{% block content %}
    {% if messages %}
        {% for message in messages %}
            <div class="mb-4 p-4 rounded-md 
                {% if message.tags == 'success' %}bg-green-100 text-green-800 border border-green-200
                {% elif message.tags == 'error' %}bg-red-100 text-red-800 border border-red-200
                {% else %}bg-blue-100 text-blue-800 border border-blue-200{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="bg-white rounded-lg shadow-md p-6 animate-fade-in">
        <h2 class="text-2xl font-semibold mb-6 text-gray-800">Adicionar Novo Funcion√°rio</h2>

        <form method="POST" class="space-y-6">
            {% csrf_token %}

            <!-- Nome -->
            <div>
                <label for="{{ form.nome.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    {{ form.nome.label }}
                    <span class="text-red-500">*</span>
                </label>
                {{ form.nome }}
                {% if form.nome.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.nome.help_text }}</p>
                {% endif %}
                {% if form.nome.errors %}
                    {% for error in form.nome.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </div>

            <!-- Departamento -->
            <div>
                <label for="{{ form.departamento.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    {{ form.departamento.label }}
                    <span class="text-red-500">*</span>
                </label>
                {{ form.departamento }}
                {% if form.departamento.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.departamento.help_text }}</p>
                {% endif %}
                {% if form.departamento.errors %}
                    {% for error in form.departamento.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </div>

            <!-- Ramal -->
            <div>
                <label for="{{ form.ramal.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    {{ form.ramal.label }}
                    <span class="text-red-500">*</span>
                </label>
                {{ form.ramal }}
                {% if form.ramal.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.ramal.help_text }}</p>
                {% endif %}
                {% if form.ramal.errors %}
                    {% for error in form.ramal.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </div>

            <!-- Responsabilidades como cards clic√°veis -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    {{ form.responsabilidades.label }}
                </label>

                <div class="flex flex-wrap gap-2">
                    {% for responsabilidade in form.responsabilidades %}
                        <label class="relative cursor-pointer group">
                            {{ responsabilidade.tag }}
                            <div class="absolute inset-0 rounded-lg border border-gray-300 bg-white
                                        transition-all duration-200
                                        group-hover:border-blue-400
                                        peer-checked:border-blue-600
                                        peer-checked:bg-blue-50
                                        pointer-events-none">
                            </div>
                            <div class="block relative z-10 px-3 py-2 text-sm text-gray-800 
                                        w-[150px] max-w-full text-center">
                                {{ responsabilidade.choice_label }}
                            </div>
                        </label>
                    {% endfor %}
                </div>

                {% if form.responsabilidades.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.responsabilidades.help_text }}</p>
                {% endif %}
                {% if form.responsabilidades.errors %}
                    {% for error in form.responsabilidades.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ error }}</p>
                    {% endfor %}
                {% endif %}
            </div>




            <!-- Is Chefia -->
            <div class="flex items-center space-x-2">
                {{ form.is_chefia }}
                <label for="{{ form.is_chefia.id_for_label }}" class="text-gray-700 text-sm">
                    {{ form.is_chefia.label }}
                </label>
            </div>

            <!-- Bot√µes -->
            <div class="flex space-x-4 pt-6 border-t">
                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transform transition hover:-translate-y-1">
                    üíæ Salvar Funcion√°rio
                </button>
                <a href="{% url 'quadro_equipe:quadro_funcionarios' %}" class="bg-gray-500 text-white px-6 py-2 rounded-md hover:bg-gray-600">
                    ‚ùå Cancelar
                </a>
            </div>
        </form>
    </div>

{% endblock %}
